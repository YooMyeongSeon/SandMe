<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.green.sandme.member.cart.dao.CartDao">
  
  
<!-- mybatis를 통한 sql제어를 위한 .xml파일
	mybatis에서는 .xml mapping을 통해 쿼리문만 관리하기 가능
 -->  

<!-- 장바구니에 저장 -->
	<insert id="insertCart" parameterType="com.green.sandme.member.cart.vo.CartVO">
		INSERT INTO cart_tbl (cartNum, cartMenu, cartShop, custom, cartAddress)
		VALUES(cart_seq.nextval, #{cartMenu}, #{cartShop}, #{custom}, #{cartAddress})
	</insert>


 
 <!-- 장바구니 목록 조회 -->
    <select id="SelectCart" resultType="com.green.sandme.member.cart.vo.CartVO" parameterType="int">
        SELECT  c.cartNum, c.cartMenu, c.custom, c.cartCount, c.cartAddress, m.menuNum, mem.memberName
		FROM cart_tbl c INNER JOIN menu_tbl m
		ON c.cartMenu = m.menuNum
		INNER JOIN member_tbl mem
		ON c.memberNum = mem.memberNum
		WHERE m.menuNum = #{menuNum}
    </select>
    


<!-- 장바구니 목록 삭제 -->    
    <delete id="deleteCart" parameterType="int">
    	DELETE FROM cart_tbl
    	WHERE cartNum =  #{cartNum}
    </delete>
    
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
    

	
<!-- 회원 정보 가져오기 -->
	<select id="selectMember" resultType="com.green.sandme.member.cart.vo.MemberVO" parameterType="int">
		SELECT memberTel, memberNum
		FROM member_tbl
		WHERE memberNum = #{memberNum}
	
	</select>
	
<!-- 지점 정보 가져오기 -->
	<select id="orderStore" resultType="com.green.sandme.member.cart.vo.StoreVO" parameterType="int">
		SELECT storeName
		FROM store_tbl s INNER JOIN order_tbl o
		    ON s.storeNum = o.storeNum
		INNER JOIN cart_tbl c
			ON o.orderNum = c.orderNum
		INNER JOIN member_tbl m
			ON c.memberNum = m.memberNum
		WHERE c.memberNum = #{memberNum}
	</select>

    
</mapper>





