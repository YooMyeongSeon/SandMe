<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.green.sandme.member.cart.dao.CartDao">
  
  
<!-- mybatis를 통한 sql제어를 위한 .xml파일
	mybatis에서는 .xml mapping을 통해 쿼리문만 관리하기 가능
 -->  
 
<!-- 장바구니 테이블 전체 조회 -->
	<select id="selectAll" resultType="com.green.sandme.member.cart.vo.CartVO">
		SELECT *
		FROM cart_tbl
	</select>
	

	
	
<!-- memberEmail, memberPwd 여부 조회 -->	
<!--  	<select id="checkLogin" resultType="com.green.sandme.member.cart.vo.MemberVO" parameterType="String">
 		SELECT memberName
		FROM member_tbl
		WHERE memberEmail = #{memberEmail}
		AND memberPwd = #{memberPwd}
 	</select> -->

 
 
 <!-- 장바구니 목록 조회 -->
    <select id="SelectCart" resultType="com.green.sandme.member.cart.vo.CartVOForList" parameterType="int">
       SELECT m.memberNum, m.memberName, c.cartMenu, c.cartCount, c.cartNum
		FROM cart_tbl c INNER JOIN member_tbl m
		ON c.memberNum = m.memberNum
		WHERE m.memberNum = #{memberNum}
    </select>
    


<!-- 장바구니 목록 삭제 -->    
    <delete id="deleteCart" parameterType="int">
    	DELETE FROM cart_tbl
    	WHERE cartNum =  #{cartNum}
    </delete>
    
    
<!-- 장바구니 수정 -->
	<delete id="updateCart" parameterType="int">
		DELETE FROM cart_tbl
    	WHERE cartNum =  #{cartNum}
	</delete>
	
<!-- 회원 정보 가져오기 -->
	<select id="selectMember" resultType="com.green.sandme.member.cart.vo.MemberVO" parameterType="int">
		SELECT memberTel, memberNum
		FROM member_tbl
		WHERE memberNum = #{memberNum}
	
	</select>
	
<!-- 지점 정보 가져오기 -->
	<select id="orderStore" resultType="com.green.sandme.member.cart.vo.StoreVO" parameterType="int">
		SELECT storeName
		FROM store_tbl s INNER JOIN order_tbl o
		    ON s.storeNum = o.storeNum
		INNER JOIN cart_tbl c
			ON o.orderNum = c.orderNum
		INNER JOIN member_tbl m
			ON c.memberNum = m.memberNum
		WHERE c.memberNum = #{memberNum}
	</select>

    
</mapper>





